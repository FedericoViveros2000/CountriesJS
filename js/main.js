import{options as a,createArticles as b,createObserver as c,createArticlesFiltered as d}from"./modules/infinityScroll.js";import{getCountry as e,countries as f}from"./modules/requestsCountries.js";import g from"./router/router.js";document.addEventListener("DOMContentLoaded",j=>{let k=0,l=10,h="https://restcountries.com/v3.1/",i=new IntersectionObserver(n,a),m=[];function n(a,d){loader.classList.add("loading"),a.forEach(a=>{a.isIntersecting&&(f.length>=f.slice(k+=10,l+=10).length&&(m=f.slice(k+=10,l+=10)),b(m),c(d))}),loader.classList.remove("loading")}g(`${h}`,i),$countryRegion.addEventListener("change",()=>{k=0,l=10,"All"!=$countryRegion.value?e(`${h}region/${$countryRegion.value}`,i):e(`${h}/lang/spa`,i)}),"true"===localStorage.dark?isDark.classList.add("dark"):isDark.classList.remove("dark"),$btnMode.addEventListener("click",()=>{isDark.classList.toggle("dark"),isDark.classList.contains("dark")?localStorage.dark="true":localStorage.dark=""}),window.addEventListener("hashchange",()=>{g(`${h}`,i)}),$inputSearch.addEventListener("keyup",()=>{let a=f.filter(a=>a.name.official.toLowerCase().split(" ").join("").includes($inputSearch.value.toLowerCase().split(" ").join("")));$containerCountry.innerHTML="",""!=$inputSearch.value?d(a):b(f.slice(0,10)),c(i)})})